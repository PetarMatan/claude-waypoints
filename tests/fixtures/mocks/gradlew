#!/bin/bash
# Mock gradlew command for testing

TEST_TMP="${TEST_TMP:-/tmp}"

case "$1" in
    "compileKotlin"|"compileTestKotlin")
        exit_code=$(cat "$TEST_TMP/mock_compile_exit_code" 2>/dev/null || echo "0")
        output=$(cat "$TEST_TMP/mock_compile_output" 2>/dev/null || echo "BUILD SUCCESSFUL")
        echo "$output"
        exit "$exit_code"
        ;;
    "test")
        exit_code=$(cat "$TEST_TMP/mock_test_exit_code" 2>/dev/null || echo "0")
        output=$(cat "$TEST_TMP/mock_test_output" 2>/dev/null || echo "BUILD SUCCESSFUL")
        echo "$output"
        exit "$exit_code"
        ;;
esac

echo "Mock gradlew: $*"
exit 0
